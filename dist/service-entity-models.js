!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("next-core-model")):"function"==typeof define&&define.amd?define("service-entity-models",["next-core-model"],t):"object"==typeof exports?exports["service-entity-models"]=t(require("next-core-model")):e["service-entity-models"]=t(e["next-core-model"])}(this,(function(e){return function(e){var t={};function s(r){if(t[r])return t[r].exports;var u=t[r]={i:r,l:!1,exports:{}};return e[r].call(u.exports,u,u.exports,s),u.l=!0,u.exports}return s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var u in e)s.d(r,u,function(t){return e[t]}.bind(null,u));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/dist/",s(s.s=5)}([function(t,s){t.exports=e},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(0),u=a(s(2)),i=a(s(3));function a(e){return e&&e.__esModule?e:{default:e}}t.default=class extends r.AbstractCollection{constructor(e,t){super(e,t),this.name="collection",this._url=""}get uri(){return this._uri}set uri(e){this._uri=e}get url(){return console.warn("url is deprecated, use uri instead."),this._uri}set url(e){console.warn("url is deprecated, use uri instead."),this._uri=e}sync(e,t){if(this.url){let s,r,a=this;t&&t.success&&"function"==typeof t.success&&(s=t.success),t&&t.error&&"function"==typeof t.error&&(r=t.error);try{let t={},o="function"==typeof this.url?this.url():this.url;if("create"===e){t=a.attributes;let e={path:o,method:"POST",headers:{"Content-Type":"application/json"}};let n=(this.secure?i.default:u.default).request(e,e=>{e.setEncoding("utf8"),e.on("data",e=>{}),e.once("end",()=>{s&&s(n.statusCode)})});n.on("error",e=>{r&&r(500,e)}),n.write(a.toJSON()),n.end()}else if("update"===e){t=a.attributes;let e={path:o,method:"PUT",headers:{"Content-Type":"application/json"}};let n=(this.secure?i.default:u.default).request(e,e=>{e.setEncoding("utf8"),e.on("data",e=>{}),e.once("end",()=>{s&&s(n.statusCode,n.statusMessage)})});n.on("error",e=>{r&&r(n.statusCode,e)}),n.write(a.toJSON()),n.end()}else if("delete"===e){let e={path:o,method:"DELETE"};let t=(this.secure?i.default:u.default).request(e,e=>{e.setEncoding("utf8"),e.once("end",()=>{s&&s(t.statusCode,t.statusMessage)})});t.on("error",e=>{r&&r(500,e)}),t.end()}else{(this.secure?i.default:u.default).get(o,e=>{let t="";e.on("data",e=>{t+=e}),e.statusCode>=200&&e.statusCode<300?e.once("end",()=>{let u={};try{u=JSON.parse(t),a.set(u),s&&s(e.statusCode,e.statusMessage)}catch(t){r&&r(e.statusCode,t)}}):r&&r(e.statusCode,e.statusMessage)}).once("error",(e,t)=>{r&&r(500,e)})}}catch(e){r&&r(500,e)}}return{}}fetch(e){this.sync("read",e)}save(e){this.sync("create",e)}update(e){this.sync("update",e)}destroy(e){this.sync("delete",e)}}},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("https")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={};r.GITHUB=Symbol("github"),r.SOLR=Symbol("solr"),r.DATABASE=Symbol("database"),t.default=r},function(e,t,s){"use strict";var r=l(s(1)),u=l(s(6)),i=l(s(7)),a=l(s(8)),o=l(s(4)),n=l(s(9)),c=l(s(10));function l(e){return e&&e.__esModule?e:{default:e}}e.exports.ResourceCollection=r.default,e.exports.EntityCollection=u.default,e.exports.PaginatedResourceCollection=i.default,e.exports.PaginationFactory=a.default,e.exports.PAGINATION_API=o.default,e.exports.Entity=n.default,e.exports.Resource=c.default},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(0);t.default=class extends r.AbstractCollection{constructor(e,t){super(e,t),t||(t={}),this.name=t.name?t.name:"collection",this._uri=t.uri?t.uri:"",this.query=t.query?t.query:null,this.datasource=t.datasource?t.datasource:null}get url(){return this._url}set url(e){this._url=e}initialize(e){e&&(e.datasource&&(this.datasource=e.datasource),e.query&&(this.query=e.query),e.name&&(this.name=e.name),e.url&&(this.url=e.url)),this.datasource&&""===this.url&&(this.url=this.datasource.url),this.setDataSourceCollection(this.name),this.init(e)}init(e){}setDatasource(e){this.datasource=e}sync(e,t){if(this.datasource){let s=this;try{let r,u={};"create"===e?(u=this.toJSON(),this.datasource.insert(u,()=>{s.reset(u),t&&t.success&&"function"==typeof t.success&&t.success()})):"update"===e?(u=this.toJSON(),r=t&&t.query?t.query:this.query,this.datasource.update(r,u,()=>{t&&t.success&&"function"==typeof t.success&&t.success()})):"delete"===e?(r=t&&t.query?t.query:this.query,this.datasource.remove(r,()=>{s.reset(),t&&t.success&&"function"==typeof t.success&&t.success()})):(r=t&&t.query?t.query:this.query,this.datasource.query(r,e=>{s.reset(e),t&&t.success&&"function"==typeof t.success&&t.success(e)}))}catch(e){t&&t.error&&"function"==typeof t.error&&t.error(e)}}return{}}fetch(e){this.sync("read",e)}save(e){this.sync("create",e)}update(e){this.sync("update",e)}destroy(e){this.sync("delete",e)}setDataSourceCollection(e){e&&Augmented.isString(e)&&this.datasource&&(this.name=e,this.datasource.setCollection(e))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,u=s(1),i=(r=u)&&r.__esModule?r:{default:r};t.default=class extends i.default{constructor(e,t){super(e,t),t||(t={}),this.paginationConfiguration={currentPageParam:"page",pageSizeParam:"per_page"},this.pageSize=t.pageSize?t.pageSize:20,this.currentPage=t.currentPage?t.currentPage:1,this.totalPages=1}setPageSize(e){e&&(this.pageSize=e),this.refresh()}setCurrentPage(e){e||(e=1),this.currentPage=e,this.refresh()}setPaginationConfiguration(e){this.paginationConfiguration=e}fetch(e){(e=e||{}).data;var t=this.paginationConfiguration,s={};return s[t.currentPageParam]=this.currentPage,s[t.pageSizeParam]=this.pageSize,e.data=s,super.fetch(e)}nextPage(){this.currentPage<this.totalPages&&(this.currentPage=this.currentPage+1,this.refresh())}previousPage(){this.currentPage>0&&(this.currentPage=this.currentPage-1,this.refresh())}goToPage(e){e&&e<this.totalPages&&e>0&&(this.currentPage=e,this.refresh())}firstPage(){this.currentPage=1,this.refresh()}lastPage(){this.currentPage=this.totalPages,this.refresh()}refresh(){this.fetch()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,u=s(4),i=(r=u)&&r.__esModule?r:{default:r};t.default=class{constructor(){this.type=i.default}static getPaginatedCollection(e,t,s){const r=s||{};let u=null;return t||(t=i.default.GITHUB),t===i.default.GITHUB?(u=new e(r)).setPaginationConfiguration({currentPageParam:"page",pageSizeParam:"per_page"}):t===i.default.SOLR?(u=new e(r)).setPaginationConfiguration({currentPageParam:"start",pageSizeParam:"rows"}):t===i.default.DATABASE&&(u=new e(r)).setPaginationConfiguration({currentPageParam:"offset",pageSizeParam:"limit"}),u}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(0);t.default=class extends r.AbstractModel{constructor(e,t,...s){super(e,t,s),this.id="",this.url="",this.query={},this.collection="collection",this.datasource=null}initialize(e){e&&(e.collection&&(this.collection=e.collection),e.datasource&&(this.datasource=e.datasource),e.url&&(this.url=this.datasource.url),e.id&&(this.id=e.id),e.query&&(this.query=e.query)),this.unset("datasource"),this.unset("url"),this.unset("query"),this.unset("collection"),this.unset("id"),this.datasource&&this.datasource.setCollection(this.collection),this.init(e)}init(e){}sync(e,t){if(this.datasource){let s=this;try{let r,u={};if("create"===e)u=s.attributes,this.datasource.insert(u,(function(){s.reset(u),t&&t.success&&"function"==typeof t.success&&t.success()}));else if("update"===e)u=s.attributes,r=t&&t.query?t.query:this.query,this.datasource.update(r,u,(function(){t&&t.success&&"function"==typeof t.success&&t.success()}));else if("delete"===e)r=t&&t.query?t.query:this.query,this.datasource.remove(r,(function(){s.reset(),t&&t.success&&"function"==typeof t.success&&t.success()}));else{let e=r=t&&t.query?t.query:s.query;if(Augmented.isFunction(r)){e=r()}this.datasource.query(e,(function(e){if(null===e)throw new Error("No Data Returned!");Array.isArray(e)&&e.length>0?s.reset(e[0]):Array.isArray(e)&&0===e.length?s.reset():s.reset(e),t&&t.success&&"function"==typeof t.success&&t.success(e)}))}}catch(e){t&&t.error&&"function"==typeof t.error&&t.error(e)}}return{}}fetch(e){this.sync("read",e)}save(e){this.sync("create",e)}update(e){this.sync("update",e)}destroy(e){this.sync("delete",e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(0),u=a(s(2)),i=a(s(3));function a(e){return e&&e.__esModule?e:{default:e}}t.default=class extends r.AbstractModel{constructor(e,t,...s){super(e,t,s),this.secure=!1,this.id="",this.url=""}initialize(e){e&&e.url&&(this.url=e.url),this.unset("uri"),this.init(e)}init(e){}fetch(e){this.sync("read",e)}sync(e,t){if(this.url){let s,r,a=this;t&&t.success&&"function"==typeof t.success&&(s=t.success),t&&t.error&&"function"==typeof t.error&&(r=t.error);try{let t={},o="function"==typeof this.url?this.url():this.url;if("create"===e){t=a.attributes;let e={path:o,method:"POST",headers:{"Content-Type":"application/json"}};let n=(this.secure?i.default:u.default).request(e,e=>{e.setEncoding("utf8"),e.on("data",e=>{}),e.once("end",()=>{s&&s(n.statusCode)})});n.on("error",e=>{r&&r(500,e)}),n.write(a.toJSON()),n.end()}else if("update"===e){t=a.attributes;let e={path:o,method:"PUT",headers:{"Content-Type":"application/json"}};let n=(this.secure?i.default:u.default).request(e,e=>{e.setEncoding("utf8"),e.on("data",e=>{}),e.once("end",()=>{s&&s(n.statusCode,n.statusMessage)})});n.on("error",e=>{r&&r(n.statusCode,e)}),n.write(a.toJSON()),n.end()}else if("delete"===e){let e={path:o,method:"DELETE"};let t=(this.secure?i.default:u.default).request(e,e=>{e.setEncoding("utf8"),e.once("end",()=>{s&&s(t.statusCode,t.statusMessage)})});t.on("error",e=>{r&&r(500,e)}),t.end()}else{(this.secure?i.default:u.default).get(o,e=>{let t="";e.on("data",e=>{t+=e}),e.statusCode>=200&&e.statusCode<300?e.once("end",()=>{let u={};try{u=JSON.parse(t),a.set(u),s&&s(e.statusCode,e.statusMessage)}catch(t){r&&r(e.statusCode,t)}}):r&&r(e.statusCode,e.statusMessage)}).once("error",(e,t)=>{r&&r(500,e)})}}catch(e){r&&r(500,e)}}return{}}}}])}));
//# sourceMappingURL=service-entity-models.js.map